<!-- app/views/events/index.html.erb -->
<h1>Tutti gli Eventi</h1>

<%= link_to 'Crea Nuovo Evento', new_event_path, class: 'btn btn-success' %>

<table class="table">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Data e Ora di Inizio</th>
      <th>Data e Ora di Fine</th>
      <th>Partecipanti Max</th>
      <th>Indirizzo</th>
      <th>CAP</th>
      <th>Provincia</th>
      <th>Paese</th>
      <th>Azioni</th>
    </tr>
  </thead>
  <tbody>
    <% @events.each do |event| %>
      <tr>
        <td><%= event.name %></td>
        <td><%= format_date(event.beginning_date) %> alle <%= format_time(event.beginning_time) %></td>
        <td><%= format_date(event.ending_date) %> alle <%= format_time(event.ending_time) %></td>
        <td><%= event.max_participants %></td>
        <td><%= event.address %></td>
        <td><%= event.cap %></td>
        <td><%= event.province %></td>
        <td><%= event.country %></td>
        <td>
          <%= link_to 'Visualizza', event_path(event), class: 'btn btn-info' %>
          <% if event.user == current_user %>
            <%= link_to 'Modifica', edit_event_path(event), class: 'btn btn-warning' %>
             <%= link_to 'Delete', 'javascript:void(0);', class: 'btn btn-danger ms-2', 'data-bs-toggle': 'modal', 'data-bs-target': "#deleteEvent#{event.id}"  %>
            <%= render 'modals/delete_event_modal', event: event %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
